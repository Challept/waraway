const militaryData = {
  "Afghanistan": {
    "military_strength": 150000,
    "available_for_war": 25000000,
    "warplanes": 120,
    "tanks": 600,
    "naval_strength": 0
  },
  "Albania": {
    "military_strength": 8300,
    "available_for_war": 800000,
    "warplanes": 12,
    "tanks": 30,
    "naval_strength": 4
  },
  "Algeria": {
    "military_strength": 130000,
    "available_for_war": 7000000,
    "warplanes": 550,
    "tanks": 2025,
    "naval_strength": 85
  },
  "Angola": {
    "military_strength": 107000,
    "available_for_war": 6000000,
    "warplanes": 270,
    "tanks": 110,
    "naval_strength": 56
  },
  "Argentina": {
    "military_strength": 75000,
    "available_for_war": 18000000,
    "warplanes": 190,
    "tanks": 400,
    "naval_strength": 42
  },
  "Armenia": {
    "military_strength": 49000,
    "available_for_war": 500000,
    "warplanes": 64,
    "tanks": 400,
    "naval_strength": 0
  },
  "Australia": {
    "military_strength": 59000,
    "available_for_war": 5000000,
    "warplanes": 450,
    "tanks": 59,
    "naval_strength": 48
  },
  "Austria": {
    "military_strength": 25000,
    "available_for_war": 1000000,
    "warplanes": 79,
    "tanks": 56,
    "naval_strength": 0
  },
  "Azerbaijan": {
    "military_strength": 126000,
    "available_for_war": 3000000,
    "warplanes": 137,
    "tanks": 570,
    "naval_strength": 31
  },
  "Bangladesh": {
    "military_strength": 240000,
    "available_for_war": 65000000,
    "warplanes": 170,
    "tanks": 330,
    "naval_strength": 89
  },
  "Belarus": {
    "military_strength": 45000,
    "available_for_war": 1000000,
    "warplanes": 265,
    "tanks": 620,
    "naval_strength": 0
  },
  "Belgium": {
    "military_strength": 29000,
    "available_for_war": 1500000,
    "warplanes": 115,
    "tanks": 0,
    "naval_strength": 20
  },
  "Bolivia": {
    "military_strength": 34000,
    "available_for_war": 4000000,
    "warplanes": 40,
    "tanks": 70,
    "naval_strength": 63
  },
  "Bosnia and Herzegovina": {
    "military_strength": 10000,
    "available_for_war": 300000,
    "warplanes": 13,
    "tanks": 65,
    "naval_strength": 0
  },
  "Botswana": {
    "military_strength": 9000,
    "available_for_war": 200000,
    "warplanes": 12,
    "tanks": 40,
    "naval_strength": 0
  },
  "Brazil": {
    "military_strength": 334000,
    "available_for_war": 100000000,
    "warplanes": 715,
    "tanks": 437,
    "naval_strength": 112
  },
  "Bulgaria": {
    "military_strength": 29000,
    "available_for_war": 2000000,
    "warplanes": 55,
    "tanks": 320,
    "naval_strength": 28
  },
  "Burkina Faso": {
    "military_strength": 11500,
    "available_for_war": 8000000,
    "warplanes": 12,
    "tanks": 0,
    "naval_strength": 0
  },
  "Burundi": {
    "military_strength": 20000,
    "available_for_war": 3500000,
    "warplanes": 8,
    "tanks": 10,
    "naval_strength": 0
  },
  "Cambodia": {
    "military_strength": 125000,
    "available_for_war": 5000000,
    "warplanes": 50,
    "tanks": 245,
    "naval_strength": 35
  },
  "Cameroon": {
    "military_strength": 36000,
    "available_for_war": 4000000,
    "warplanes": 18,
    "tanks": 50,
    "naval_strength": 35
  },
  "Canada": {
    "military_strength": 67000,
    "available_for_war": 9000000,
    "warplanes": 390,
    "tanks": 82,
    "naval_strength": 62
  },
  "Chad": {
    "military_strength": 33000,
    "available_for_war": 4000000,
    "warplanes": 12,
    "tanks": 30,
    "naval_strength": 0
  },
  "Chile": {
    "military_strength": 80000,
    "available_for_war": 9000000,
    "warplanes": 255,
    "tanks": 265,
    "naval_strength": 70
  },
  "China": {
    "military_strength": 2000000,
    "available_for_war": 750000000,
    "warplanes": 3210,
    "tanks": 5250,
    "naval_strength": 777
  },
  "Colombia": {
    "military_strength": 293000,
    "available_for_war": 30000000,
    "warplanes": 290,
    "tanks": 0,
    "naval_strength": 234
  },
  "Congo (Democratic Republic)": {
    "military_strength": 134000,
    "available_for_war": 20000000,
    "warplanes": 20,
    "tanks": 200,
    "naval_strength": 23
  },
  "Croatia": {
    "military_strength": 15000,
    "available_for_war": 700000,
    "warplanes": 12,
    "tanks": 72,
    "naval_strength": 28
  },
  "Cuba": {
    "military_strength": 50000,
    "available_for_war": 1500000,
    "warplanes": 60,
    "tanks": 1200,
    "naval_strength": 18
  },
  "Cyprus": {
    "military_strength": 12000,
    "available_for_war": 100000,
    "warplanes": 10,
    "tanks": 82,
    "naval_strength": 9
  },
  "Czech Republic": {
    "military_strength": 25000,
    "available_for_war": 2000000,
    "warplanes": 50,
    "tanks": 123,
    "naval_strength": 0
  },
  "Denmark": {
    "military_strength": 15000,
    "available_for_war": 600000,
    "warplanes": 118,
    "tanks": 44,
    "naval_strength": 68
  },
  "Egypt": {
    "military_strength": 438500,
    "available_for_war": 42000000,
    "warplanes": 1053,
    "tanks": 4100,
    "naval_strength": 245
  },
  "Ethiopia": {
    "military_strength": 162000,
    "available_for_war": 40000000,
    "warplanes": 90,
    "tanks": 400,
    "naval_strength": 0
  },
  "Finland": {
    "military_strength": 23000,
    "available_for_war": 1000000,
    "warplanes": 55,
    "tanks": 200,
    "naval_strength": 19
  },
  "France": {
    "military_strength": 203000,
    "available_for_war": 31000000,
    "warplanes": 1055,
    "tanks": 406,
    "naval_strength": 180
  },
  "Germany": {
    "military_strength": 184000,
    "available_for_war": 3000000,
    "warplanes": 613,
    "tanks": 245,
    "naval_strength": 81
  },
  "Greece": {
    "military_strength": 134000,
    "available_for_war": 4000000,
    "warplanes": 566,
    "tanks": 1320,
    "naval_strength": 120
  },
  "India": {
    "military_strength": 1450000,
    "available_for_war": 622000000,
    "warplanes": 2100,
    "tanks": 4500,
    "naval_strength": 295
  },
  "Indonesia": {
    "military_strength": 400000,
    "available_for_war": 100000000,
    "warplanes": 463,
    "tanks": 315,
    "naval_strength": 281
  },
  "Iran": {
    "military_strength": 523000,
    "available_for_war": 47000000,
    "warplanes": 516,
    "tanks": 1775,
    "naval_strength": 398
  },
  "Iraq": {
    "military_strength": 350000,
    "available_for_war": 20000000,
    "warplanes": 179,
    "tanks": 350,
    "naval_strength": 16
  },
  "Israel": {
    "military_strength": 169500,
    "available_for_war": 9500000,
    "warplanes": 586,
    "tanks": 1650,
    "naval_strength": 67
  },
  "Italy": {
    "military_strength": 165500,
    "available_for_war": 25000000,
    "warplanes": 862,
    "tanks": 200,
    "naval_strength": 249
  },
  "Japan": {
    "military_strength": 247000,
    "available_for_war": 43000000,
    "warplanes": 1450,
    "tanks": 1004,
    "naval_strength": 155
  },
  "Jordan": {
    "military_strength": 100000,
    "available_for_war": 5000000,
    "warplanes": 250,
    "tanks": 1200,
    "naval_strength": 27
  },
  "Kazakhstan": {
    "military_strength": 39000,
    "available_for_war": 3000000,
    "warplanes": 238,
    "tanks": 300,
    "naval_strength": 14
  },
  "Kenya": {
    "military_strength": 24000,
    "available_for_war": 5000000,
    "warplanes": 127,
    "tanks": 76,
    "naval_strength": 18
  },
  "North Korea": {
    "military_strength": 1280000,
    "available_for_war": 6000000,
    "warplanes": 946,
    "tanks": 6000,
    "naval_strength": 967
  },
  "South Korea": {
    "military_strength": 555000,
    "available_for_war": 25000000,
    "warplanes": 1600,
    "tanks": 2600,
    "naval_strength": 234
  },
  "Kuwait": {
    "military_strength": 15000,
    "available_for_war": 1000000,
    "warplanes": 85,
    "tanks": 368,
    "naval_strength": 38
  },
  "Kyrgyzstan": {
    "military_strength": 20000,
    "available_for_war": 1000000,
    "warplanes": 40,
    "tanks": 150,
    "naval_strength": 0
  },
  "Laos": {
    "military_strength": 30000,
    "available_for_war": 2000000,
    "warplanes": 25,
    "tanks": 100,
    "naval_strength": 0
  },
  "Latvia": {
    "military_strength": 6000,
    "available_for_war": 500000,
    "warplanes": 10,
    "tanks": 0,
    "naval_strength": 5
  },
  "Lebanon": {
    "military_strength": 80000,
    "available_for_war": 3000000,
    "warplanes": 66,
    "tanks": 300,
    "naval_strength": 50
  },
  "Lesotho": {
    "military_strength": 2000,
    "available_for_war": 50000,
    "warplanes": 5,
    "tanks": 0,
    "naval_strength": 0
  },
  "Liberia": {
    "military_strength": 2000,
    "available_for_war": 100000,
    "warplanes": 2,
    "tanks": 0,
    "naval_strength": 0
  },
  "Libya": {
    "military_strength": 30000,
    "available_for_war": 2000000,
    "warplanes": 200,
    "tanks": 500,
    "naval_strength": 10
  },
  "Lithuania": {
    "military_strength": 16000,
    "available_for_war": 500000,
    "warplanes": 20,
    "tanks": 0,
    "naval_strength": 0
  },
  "Luxembourg": {
    "military_strength": 1000,
    "available_for_war": 50000,
    "warplanes": 0,
    "tanks": 0,
    "naval_strength": 0
  },
  "Madagascar": {
    "military_strength": 21000,
    "available_for_war": 5000000,
    "warplanes": 10,
    "tanks": 20,
    "naval_strength": 10
  },
  "Malawi": {
    "military_strength": 12000,
    "available_for_war": 2000000,
    "warplanes": 10,
    "tanks": 10,
    "naval_strength": 0
  },
  "Malaysia": {
    "military_strength": 110000,
    "available_for_war": 10000000,
    "warplanes": 200,
    "tanks": 100,
    "naval_strength": 60
  },
  "Mali": {
    "military_strength": 18000,
    "available_for_war": 4000000,
    "warplanes": 10,
    "tanks": 20,
    "naval_strength": 0
  },
  "Malta": {
    "military_strength": 2000,
    "available_for_war": 50000,
    "warplanes": 0,
    "tanks": 0,
    "naval_strength": 0
  },
  "Mauritania": {
    "military_strength": 20000,
    "available_for_war": 1000000,
    "warplanes": 10,
    "tanks": 20,
    "naval_strength": 0
  },
  "Mexico": {
    "military_strength": 277000,
    "available_for_war": 50000000,
    "warplanes": 500,
    "tanks": 350,
    "naval_strength": 143
  },
  "Moldova": {
    "military_strength": 5000,
    "available_for_war": 500000,
    "warplanes": 10,
    "tanks": 0,
    "naval_strength": 0
  },
  "Mongolia": {
    "military_strength": 10000,
    "available_for_war": 1000000,
    "warplanes": 20,
    "tanks": 50,
    "naval_strength": 0
  },
  "Montenegro": {
    "military_strength": 2000,
    "available_for_war": 50000,
    "warplanes": 5,
    "tanks": 0,
    "naval_strength": 0
  },
  "Morocco": {
    "military_strength": 195000,
    "available_for_war": 10000000,
    "warplanes": 300,
    "tanks": 1200,
    "naval_strength": 121
  },
  "Mozambique": {
    "military_strength": 11000,
    "available_for_war": 5000000,
    "warplanes": 10,
    "tanks": 20,
    "naval_strength": 10
  },
  "Myanmar": {
    "military_strength": 406000,
    "available_for_war": 20000000,
    "warplanes": 300,
    "tanks": 600,
    "naval_strength": 100
  },
  "Namibia": {
    "military_strength": 9000,
    "available_for_war": 500000,
    "warplanes": 10,
    "tanks": 20,
    "naval_strength": 0
  },
  "Nepal": {
    "military_strength": 95000,
    "available_for_war": 5000000,
    "warplanes": 10,
    "tanks": 20,
    "naval_strength": 0
  },
  "Netherlands": {
    "military_strength": 35000,
    "available_for_war": 2000000,
    "warplanes": 200,
    "tanks": 0,
    "naval_strength": 60
  },
  "New Zealand": {
    "military_strength": 9000,
    "available_for_war": 500000,
    "warplanes": 50,
    "tanks": 0,
    "naval_strength": 20
  },
  "Nicaragua": {
    "military_strength": 12000,
    "available_for_war": 1000000,
    "warplanes": 10,
    "tanks": 20,
    "naval_strength": 10
  },
  "Niger": {
    "military_strength": 5000,
    "available_for_war": 1000000,
    "warplanes": 10,
    "tanks": 20,
    "naval_strength": 0
  },
  "Nigeria": {
    "military_strength": 162000,
    "available_for_war": 50000000,
    "warplanes": 300,
    "tanks": 200,
    "naval_strength": 75
  },
  "Norway": {
    "military_strength": 23000,
    "available_for_war": 1000000,
    "warplanes": 100,
    "tanks": 50,
    "naval_strength": 60
  },
  "Oman": {
    "military_strength": 42000,
    "available_for_war": 1000000,
    "warplanes": 100,
    "tanks": 200,
    "naval_strength": 20
  },
  "Pakistan": {
    "military_strength": 654000,
    "available_for_war": 75000000,
    "warplanes": 1342,
    "tanks": 2680,
    "naval_strength": 100
  },
  "Panama": {
    "military_strength": 12000,
    "available_for_war": 1000000,
    "warplanes": 10,
    "tanks": 0,
    "naval_strength": 10
  },
  "Papua New Guinea": {
    "military_strength": 3000,
    "available_for_war": 500000,
    "warplanes": 5,
    "tanks": 0,
    "naval_strength": 0
  },
  "Paraguay": {
    "military_strength": 12000,
    "available_for_war": 1000000,
    "warplanes": 10,
    "tanks": 20,
    "naval_strength": 10
  },
  "Peru": {
    "military_strength": 90000,
    "available_for_war": 10000000,
    "warplanes": 300,
    "tanks": 300,
    "naval_strength": 60
  },
  "Philippines": {
    "military_strength": 125000,
    "available_for_war": 50000000,
    "warplanes": 300,
    "tanks": 100,
    "naval_strength": 100
  },
  "Poland": {
    "military_strength": 120000,
    "available_for_war": 10000000,
    "warplanes": 500,
    "tanks": 1000,
    "naval_strength": 50
  },
  "Portugal": {
    "military_strength": 32000,
    "available_for_war": 2000000,
    "warplanes": 100,
    "tanks": 100,
    "naval_strength": 40
  },
  "Qatar": {
    "military_strength": 12000,
    "available_for_war": 1000000,
    "warplanes": 100,
    "tanks": 100,
    "naval_strength": 20
  },
  "Romania": {
    "military_strength": 70000,
    "available_for_war": 5000000,
    "warplanes": 200,
    "tanks": 500,
    "naval_strength": 20
  },
  "Russia": {
    "military_strength": 1000000,
    "available_for_war": 500000000,
    "warplanes": 4000,
    "tanks": 12000,
    "naval_strength": 600
  },
  "Rwanda": {
    "military_strength": 33000,
    "available_for_war": 5000000,
    "warplanes": 20,
    "tanks": 50,
    "naval_strength": 0
  },
  "Saudi Arabia": {
    "military_strength": 227000,
    "available_for_war": 10000000,
    "warplanes": 700,
    "tanks": 1000,
    "naval_strength": 50
  },
  "Senegal": {
    "military_strength": 20000,
    "available_for_war": 5000000,
    "warplanes": 20,
    "tanks": 50,
    "naval_strength": 10
  },
  "Serbia": {
    "military_strength": 28000,
    "available_for_war": 2000000,
    "warplanes": 100,
    "tanks": 300,
    "naval_strength": 20
  },
  "Sierra Leone": {
    "military_strength": 8000,
    "available_for_war": 1000000,
    "warplanes": 5,
    "tanks": 10,
    "naval_strength": 0
  },
  "Singapore": {
    "military_strength": 72000,
    "available_for_war": 5000000,
    "warplanes": 200,
    "tanks": 100,
    "naval_strength": 20
  },
  "Slovakia": {
    "military_strength": 16000,
    "available_for_war": 1000000,
    "warplanes": 50,
    "tanks": 100,
    "naval_strength": 0
  },
  "Slovenia": {
    "military_strength": 7000,
    "available_for_war": 500000,
    "warplanes": 20,
    "tanks": 50,
    "naval_strength": 0
  },
  "Somalia": {
    "military_strength": 20000,
    "available_for_war": 5000000,
    "warplanes": 10,
    "tanks": 20,
    "naval_strength": 0
  },
  "South Africa": {
    "military_strength": 67000,
    "available_for_war": 10000000,
    "warplanes": 200,
    "tanks": 200,
    "naval_strength": 30
  },
  "Spain": {
    "military_strength": 125000,
    "available_for_war": 10000000,
    "warplanes": 500,
    "tanks": 300,
    "naval_strength": 60
  },
  "Sri Lanka": {
    "military_strength": 250000,
    "available_for_war": 10000000,
    "warplanes": 200,
    "tanks": 100,
    "naval_strength": 50
  },
  "Sudan": {
    "military_strength": 100000,
    "available_for_war": 10000000,
    "warplanes": 100,
    "tanks": 200,
    "naval_strength": 20
  },
  "Sweden": {
    "military_strength": 25000,
    "available_for_war": 2000000,
    "warplanes": 200,
    "tanks": 100,
    "naval_strength": 50
  },
  "Switzerland": {
    "military_strength": 20000,
    "available_for_war": 1000000,
    "warplanes": 100,
    "tanks": 50,
    "naval_strength": 0
  },
  "Syria": {
    "military_strength": 142000,
    "available_for_war": 10000000,
    "warplanes": 500,
    "tanks": 2000,
    "naval_strength": 20
  },
  "Taiwan": {
    "military_strength": 165000,
    "available_for_war": 10000000,
    "warplanes": 600,
    "tanks": 1000,
    "naval_strength": 50
  },
  "Tajikistan": {
    "military_strength": 20000,
    "available_for_war": 1000000,
    "warplanes": 20,
    "tanks": 100,
    "naval_strength": 0
  },
  "Tanzania": {
    "military_strength": 27000,
    "available_for_war": 10000000,
    "warplanes": 20,
    "tanks": 50,
    "naval_strength": 10
  },
  "Thailand": {
    "military_strength": 360000,
    "available_for_war": 50000000,
    "warplanes": 500,
    "tanks": 1000,
    "naval_strength": 100
  },
  "Togo": {
    "military_strength": 8000,
    "available_for_war": 1000000,
    "warplanes": 10,
    "tanks": 20,
    "naval_strength": 0
  },
  "Trinidad and Tobago": {
    "military_strength": 4000,
    "available_for_war": 500000,
    "warplanes": 5,
    "tanks": 0,
    "naval_strength": 10
  },
  "Tunisia": {
    "military_strength": 36000,
    "available_for_war": 2000000,
    "warplanes": 100,
    "tanks": 200,
    "naval_strength": 20
  },
  "Turkey": {
    "military_strength": 355000,
    "available_for_war": 50000000,
    "warplanes": 1000,
    "tanks": 3000,
    "naval_strength": 150
  },
  "Turkmenistan": {
    "military_strength": 36000,
    "available_for_war": 1000000,
    "warplanes": 100,
    "tanks": 500,
    "naval_strength": 0
  },
  "Uganda": {
    "military_strength": 45000,
    "available_for_war": 10000000,
    "warplanes": 20,
    "tanks": 50,
    "naval_strength": 10
  },
  "Ukraine": {
    "military_strength": 250000,
    "available_for_war": 20000000,
    "warplanes": 300,
    "tanks": 1000,
    "naval_strength": 30
  },
  "United Arab Emirates": {
    "military_strength": 63000,
    "available_for_war": 1000000,
    "warplanes": 500,
    "tanks": 500,
    "naval_strength": 75
  },
  "United Kingdom": {
    "military_strength": 194000,
    "available_for_war": 10000000,
    "warplanes": 800,
    "tanks": 400,
    "naval_strength": 150
  },
  "United States": {
    "military_strength": 1400000,
    "available_for_war": 100000000,
    "warplanes": 13200,
    "tanks": 6200,
    "naval_strength": 490
  },
  "Uruguay": {
    "military_strength": 24000,
    "available_for_war": 1000000,
    "warplanes": 50,
    "tanks": 100,
    "naval_strength": 10
  },
  "Uzbekistan": {
    "military_strength": 50000,
    "available_for_war": 1000000,
    "warplanes": 100,
    "tanks": 420,
    "naval_strength": 0
  },
  "Venezuela": {
    "military_strength": 123000,
    "available_for_war": 10000000,
    "warplanes": 280,
    "tanks": 500,
    "naval_strength": 40
  },
  "Vietnam": {
    "military_strength": 482000,
    "available_for_war": 50000000,
    "warplanes": 300,
    "tanks": 1500,
    "naval_strength": 65
  },
  "Yemen": {
    "military_strength": 66000,
    "available_for_war": 10000000,
    "warplanes": 100,
    "tanks": 300,
    "naval_strength": 10
  },
  "Zambia": {
    "military_strength": 15000,
    "available_for_war": 1000000,
    "warplanes": 20,
    "tanks": 50,
    "naval_strength": 0
  },
  "Zimbabwe": {
    "military_strength": 30000,
    "available_for_war": 5000000,
    "warplanes": 20,
    "tanks": 50,
    "naval_strength": 0
  }
};

// Translations from Swedish to English
// Placera countryTranslations här för att säkerställa att den är tillgänglig globalt
const countryTranslations = {
  "sverige": "Sweden",
  "tyskland": "Germany",
  "ryssland": "Russia",
  "usa": "USA",
  "förenade staterna": "USA",
  "deutschland": "Germany",
  "norge": "Norway",
  "finland": "Finland"
  // Lägg till fler översättningar om det behövs
};
// Funktion för att hitta närmaste land genom att använda Levenshtein-avstånd
// Funktion för att hitta närmaste land genom att använda Levenshtein-avstånd
function findClosestCountry(input, countryList) {
    input = input.toLowerCase();
    let closestCountry = '';
    let shortestDistance = Infinity;

    countryList.forEach(country => {
        const distance = levenshteinDistance(input, country.toLowerCase());
        if (distance < shortestDistance) {
            shortestDistance = distance;
            closestCountry = country;
        }
    });

    return closestCountry;
}

// Levenshtein distance-algoritmen för att beräkna avstånd mellan två strängar
function levenshteinDistance(a, b) {
    const matrix = [];

    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    for (let i = 0; i <= b.length; i++) {
        matrix[i] = [i];
    }
    for (let j = 0; j <= a.length; j++) {
        matrix[0][j] = j;
    }

    for (let i = 1; i <= b.length; i++) {
        for (let j = 1; j <= a.length; j++) {
            if (b.charAt(i - 1) === a.charAt(j - 1)) {
                matrix[i][j] = matrix[i - 1][j - 1];
            } else {
                matrix[i][j] = Math.min(
                    matrix[i - 1][j - 1] + 1, // Substitution
                    matrix[i][j - 1] + 1,     // Insättning
                    matrix[i - 1][j] + 1      // Borttagning
                );
            }
        }
    }

    return matrix[b.length][a.length];
}

// Uppdaterad translateCountry-funktion för att hantera stavfel
function translateCountry(input) {
  const lowerCaseInput = input.toLowerCase();
  if (countryTranslations[lowerCaseInput]) {
    return countryTranslations[lowerCaseInput];
  }

  const allCountries = Object.keys(militaryData).concat(Object.values(countryTranslations));
  const closestMatch = findClosestCountry(input, allCountries);

  return closestMatch; // Returnerar den närmaste matchen
}

function formatNumber(num) {
  return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","); // Tusentalsavgränsare
}

function calculateMilitaryScore(military, population) {
  const militaryStrengthWeight = 5;  // Mycket viktigt
  const warplanesWeight = 4;         // Mycket viktigt
  const tanksWeight = 3;             // Viktigt
  const populationWeight = 2;        // Viktigt

  return (military.military_strength * militaryStrengthWeight) + 
         (military.warplanes * warplanesWeight) + 
         (military.tanks * tanksWeight) + 
         (population * populationWeight); 
}

function generateExplanation(c1Military, c2Military, c1Name, c2Name) {
  let explanation = '';

  if (c1Military.military_strength > c2Military.military_strength) {
    explanation += `${c1Name} won due to superior military strength. `;
  } else if (c1Military.military_strength < c2Military.military_strength) {
    explanation += `${c2Name} won due to superior military strength. `;
  }

  if (c1Military.warplanes > c2Military.warplanes) {
    explanation += `${c1Name} had more warplanes, giving them an aerial advantage. `;
  } else if (c1Military.warplanes < c2Military.warplanes) {
    explanation += `${c2Name} had more warplanes, giving them aerial superiority. `;
  }

  if (c1Military.tanks > c2Military.tanks) {
    explanation += `${c1Name} had more tanks, giving them an advantage on the ground. `;
  } else if (c1Military.tanks < c2Military.tanks) {
    explanation += `${c2Name} had more tanks, giving them a ground advantage. `;
  }

  if (explanation === '') {
    explanation = 'Both countries have similar military resources and strength.';
  }

  return explanation;
}

function compareCountries() {
  let country1Input = document.getElementById('country1').value;
  let country2Input = document.getElementById('country2').value;

  let country1Internal = translateCountry(country1Input);
  let country2Internal = translateCountry(country2Input);

  fetch('https://restcountries.com/v3.1/all?fields=name,population')
    .then(response => response.json())
    .then(data => {
      const c1 = data.find(country => country.name.common.toLowerCase() === country1Internal.toLowerCase());
      const c2 = data.find(country => country.name.common.toLowerCase() === country2Internal.toLowerCase());

      if (!c1 || !c2) {
        document.getElementById('result-left').innerHTML = `Country not found. Did you mean: ${!c1 ? country1Internal : country2Internal}?`;
        return;
      }

      const c1Military = militaryData[c1.name.common];
      const c2Military = militaryData[c2.name.common];

      if (!c1Military || !c2Military) {
        document.getElementById('result-left').innerHTML = `Military data not found for ${!c1Military ? country1Input : country2Input}.`;
        return;
      }

      let resultTextLeft = `
        <ul>
          <li><strong>Population:</strong> ${formatNumber(c1.population)}</li>
          <li><strong>Military Strength:</strong> ${formatNumber(c1Military.military_strength)}</li>
          <li><strong>Warplanes:</strong> ${formatNumber(c1Military.warplanes)}</li>
          <li><strong>Tanks:</strong> ${formatNumber(c1Military.tanks)}</li>
        </ul>`;
      
      let resultTextRight = `
        <ul>
          <li><strong>Population:</strong> ${formatNumber(c2.population)}</li>
          <li><strong>Military Strength:</strong> ${formatNumber(c2Military.military_strength)}</li>
          <li><strong>Warplanes:</strong> ${formatNumber(c2Military.warplanes)}</li>
          <li><strong>Tanks:</strong> ${formatNumber(c2Military.tanks)}</li>
        </ul>`;

      let c1Score = calculateMilitaryScore(c1Military, c1.population);
      let c2Score = calculateMilitaryScore(c2Military, c2.population);

      let c1Chance = (c1Score / (c1Score + c2Score)) * 100;
      let c2Chance = 100 - c1Chance;

      document.getElementById('win-chances').innerHTML = `
        <strong>${country1Internal} win chance:</strong> ${c1Chance.toFixed(2)}%<br>
        <strong>${country2Internal} win chance:</strong> ${c2Chance.toFixed(2)}%<br>
      `;

      let winnerText = '';
      let explanation = '';
      if (c1Score > c2Score) {
        winnerText = `Winner: ${country1Internal}`;
        explanation = generateExplanation(c1Military, c2Military, country1Internal, country2Internal);
      } else if (c2Score > c1Score) {
        winnerText = `Winner: ${country2Internal}`;
        explanation = generateExplanation(c2Military, c1Military, country2Internal, country1Internal);
      } else {
        winnerText = `Result: Draw`;
        explanation = 'Both countries have equivalent strength and resources.';
      }

      document.getElementById('result-left').innerHTML = resultTextLeft;
      document.getElementById('result-right').innerHTML = resultTextRight;
      document.getElementById('winner').innerHTML = `${winnerText}`;

      document.getElementById('explanation').innerHTML = explanation;
    })
    .catch(error => console.log('Error fetching population data:', error));
}

document.getElementById('compareButton').addEventListener('click', compareCountries);
document.getElementById('country1').addEventListener('keydown', function(event) {
  if (event.key === 'Enter') {
    event.preventDefault();
    compareCountries();
  }
});
document.getElementById('country2').addEventListener('keydown', function(event) {
  if (event.key === 'Enter') {
    event.preventDefault();
    compareCountries();
  }
});
